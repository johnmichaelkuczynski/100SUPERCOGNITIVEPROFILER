To render math symbols properly and export them to PDF correctly from your app (e.g. your rewrite app), here's the only setup that works reliably, assuming you're using a React front end and a Node.js backend:

üîß STEP-BY-STEP: Render Math Properly and Export to PDF
‚úÖ 1. Render Math in App UI (Browser Side)
Use better-react-mathjax with MathJax v3 via CDN:

bash
Copy
Edit
npm install better-react-mathjax
Then wrap your app:

jsx
Copy
Edit
import { MathJaxContext, MathJax } from 'better-react-mathjax';

const config = {
  loader: { load: ["input/tex", "output/chtml"] },
  tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] },
};

<MathJaxContext config={config}>
  <MathJax>
    {"Here is some math: \\( x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} \\)"}
  </MathJax>
</MathJaxContext>
‚úÖ 2. Render Math in PDF (Server Side)
MathJax does not render server-side automatically‚Äîyou must pre-render it.

Here are your two best options:

‚ö†Ô∏è Option A: Pre-render math using KaTeX instead
KaTeX is fast, deterministic, and works server-side.

Install:

bash
Copy
Edit
npm install katex
Use it in your PDF generator:

js
Copy
Edit
import katex from "katex";
import "katex/dist/katex.min.css"; // Ensure this CSS is injected into HTML

const renderedMath = katex.renderToString("x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}", {
  throwOnError: false
});

const htmlContent = `
  <html>
    <head>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
    </head>
    <body>
      <div>${renderedMath}</div>
    </body>
  </html>
`;
Then pass htmlContent to Puppeteer or your PDF engine.

‚úÖ Option B (Less Reliable): Use MathJax full rendering before PDF
You can trigger MathJax rendering inside Puppeteer by using:

js
Copy
Edit
await page.evaluate(() => {
  return MathJax.typesetPromise();
});
BUT THIS ONLY WORKS if:

You wait for MathJax to load

You delay the PDF print long enough for the math to fully render

This is fragile and slower. KaTeX is more stable for production.

üì¶ Final Recommendation:
Use KaTeX to render math server-side into clean HTML, and inject that HTML into your PDF template. Puppeteer will print it exactly as it looks in the browser‚Äîmath symbols intact.

